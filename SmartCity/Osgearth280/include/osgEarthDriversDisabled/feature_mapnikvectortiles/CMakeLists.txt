FIND_PACKAGE(Protobuf)

IF(SQLITE3_FOUND AND PROTOBUF_FOUND)

INCLUDE_DIRECTORIES( ${SQLITE3_INCLUDE_DIR} ${PROTOBUF_INCLUDE_DIR} ${CMAKE_CURRENT_BINARY_DIR})

PROTOBUF_GENERATE_CPP(PROTO_CPP PROTO_H vector_tile.proto)

SET(TARGET_SRC
    FeatureSourceMVT.cpp
    ${PROTO_CPP}
)

SET(TARGET_H   	
    MVTFeatureOptions
    ${PROTO_H}
)

SET(TARGET_COMMON_LIBRARIES ${TARGET_COMMON_LIBRARIES} osgEarthFeatures osgEarthSymbology osgEarthUtil)
SET(TARGET_LIBRARIES_VARS SQLITE3_LIBRARY PROTOBUF_LIBRARY)
SETUP_PLUGIN(osgearth_feature_mapnikvectortiles)


# to install public driver includes:
SET(LIB_NAME feature_mapnikvectortiles)
SET(LIB_PUBLIC_HEADERS ${TARGET_H})
INCLUDE(ModuleInstallOsgEarthDriverIncludes OPTIONAL)

ENDIF(SQLITE3_FOUND AND PROTOBUF_FOUND)